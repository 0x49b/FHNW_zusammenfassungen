\documentclass[10pt]{article}

%Packages
\usepackage{multirow}
\usepackage{multicol}
\usepackage{color}
\usepackage{xcolor}
\usepackage{listings}
\usepackage{caption}


%Math
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{ulem}
\usepackage{stmaryrd} %f\UTF{00FC}r Blitz!


%PageStyle
\usepackage[ngerman]{babel} % deutsche Silbentrennung
\usepackage[utf8]{inputenc}
\usepackage{fancyhdr, graphicx}
\usepackage[scaled=0.92]{helvet}
\usepackage{enumitem}
\usepackage{parskip}
\usepackage[a4paper,top=2cm]{geometry}
\usepackage{graphicx}
\setlength{\textwidth}{17cm}
\setlength{\oddsidemargin}{-0.5cm}

% Colors
\definecolor{darkgreen}{rgb}{0.3,0.7,0.3}

% Shortcommands
\newcommand{\Bold}[1]{\textbf{#1}} %Boldface
\newcommand{\Kursiv}[1]{\textit{#1}} %Italic
\newcommand{\T}[1]{\text{#1}} %Textmode
\newcommand{\Nicht}[1]{\T{\sout{$ #1 $}}} %Streicht Shit durch
\newcommand\graybox[1]{\colorbox{lightgray}{\ttfamily #1}} % gibt eine graue Box mit Console Text

%Arrows
\newcommand{\lra}{\leftrightarrow}
\newcommand{\ra}{\rightarrow}
\newcommand{\la}{\leftarrow}
\newcommand{\lral}{\longleftrightarrow}
\newcommand{\ral}{\longrightarrow}
\newcommand{\lal}{\longleftarrow}
\newcommand{\Lra}{\Leftrightarrow}
\newcommand{\Ra}{\Rightarrow}
\newcommand{\La}{\Leftarrow}
\newcommand{\Lral}{\Longleftrightarrow}
\newcommand{\Ral}{\Longrightarrow}
\newcommand{\Lal}{\Longleftarrow}

% Java Code listenings
\DeclareCaptionFont{white}{\color{white}}
\DeclareCaptionFormat{listing}{\colorbox{gray}{\parbox{\textwidth}{#1#2#3}}}
\captionsetup[lstlisting]{format=listing,labelfont=white,textfont=white}

% XML Snippet Listings
\definecolor{gray}{rgb}{0.4,0.4,0.4}
\definecolor{darkblue}{rgb}{0.0,0.0,0.6}
\definecolor{cyan}{rgb}{0.0,0.6,0.6}

\lstset{
basicstyle=\ttfamily,
columns=fullflexible,
showstringspaces=false,
commentstyle=\color{gray}\upshape
}

\lstdefinestyle{JavaStyle}{
language=Java,
basicstyle=\footnotesize\ttfamily, % Standardschrift
numbers=left,               % Ort der Zeilennummern
numberstyle=\tiny,          % Stil der Zeilennummern
stepnumber=5,              % Abstand zwischen den Zeilennummern
numbersep=5pt,              % Abstand der Nummern zum Text
tabsize=2,                  % Groesse von Tabs
extendedchars=true,         %
breaklines=true,            % Zeilen werden Umgebrochen
frame=b,
%commentstyle=\itshape\color{LightLime}, Was isch das? O_o
%keywordstyle=\bfseries\color{DarkPurple}, und das O_o
basicstyle=\footnotesize\ttfamily,
stringstyle=\color[RGB]{42,0,255}\ttfamily, % Farbe der String
keywordstyle=\color[RGB]{127,0,85}\ttfamily, % Farbe der Keywords
commentstyle=\color[RGB]{63,127,95}\ttfamily, % Farbe des Kommentars
showspaces=false,           % Leerzeichen anzeigen ?
showtabs=false,             % Tabs anzeigen ?
xleftmargin=17pt,
framexleftmargin=17pt,
framexrightmargin=5pt,
framexbottommargin=4pt,
showstringspaces=false      % Leerzeichen in Strings anzeigen ?
}


\lstdefinelanguage{XML}
{
morestring=[b]",
morestring=[s]{>}{<},
morecomment=[s]{<?}{?>},
stringstyle=\color{black},
identifierstyle=\color{darkblue},
keywordstyle=\color{cyan},
morekeywords={xmlns,type, name, target, level, additivity, ref}% list your attributes here
}


%Config
\renewcommand{\headrulewidth}{0pt}
\setlength{\headheight}{15.2pt}

%Metadata
\fancyfoot[C]{If you use this documentation for an exam, you should offer a beer to the authors!}
\title{
\vspace{2cm}
\textbf{Software Construction}
}
\author{Florian Thi\'event}
\date{3. Semester (HS 2018)}


% hier beginnt das Dokument
\begin{document}

    % Titelbild
    \maketitle
    \begin{center}
        \vspace{3cm}
        \includegraphics{assets/Titelbild.png}
        \thispagestyle{fancy}
    \end{center}
    \newpage

    % Inhaltsverzeichnis
    \pagenumbering{Roman}
    \tableofcontents
    \newpage
    \setcounter{page}{1}
    \pagenumbering{arabic}

    % Inhalt Start

    \section{Software Construction}
    \begin{tabular}{p{50mm} p{50mm} p{50mm}}
        \begin{center}
            Problem Definition \newline
            Anforderungen spezifizieren\newline
            \textbf{Planung der Anwendung}\newline
            SoftwareArchitektur\newline
        \end{center}
        &
        \begin{center}
            \textbf{\uline{Detail Plan}}\newline
            \textbf{\uline{Coding and Debugging}}\newline
            \textbf{\uline{Unit Testing}}\newline
        \end{center}
        &
        \begin{center}
            Team Management\newline
            Maintenance (Betrieb)\newline
            \textbf{Integration}\newline
            \textbf{Integration Testing}\newline
            System Testing\newline
        \end{center}
    \end{tabular}

    \subsection{Definition}
    Software construction is a fundamental act oft software engineering: the construction of working, \textbf{meaningful software} through a combination of \textbf{coding, validation and testing} by a programmer.
    \subsection{Low Level SWC}
    \begin{itemize}
        \item Testing definieren
        \item Design und Klassen schreiben
        \item Erstellen und Naming der Variablen und Konstanten
        \item Unit Testing, Integration Testing und Debugging
        \item Review von anderem Code von Teammitgliedern
        \item Integration von Software
        \item Formatierung von Code und Kommentaren
    \end{itemize}

    \subsection{Wieso ist SWC wichtig}
    \textbf{Construction is the only activity that's guaranteed to be done}
    \begin{center}
        \includegraphics[width=0.8\textwidth]{assets/typical_project.png}
    \end{center}

    \subsection{Software Qualit\"at}
    \begin{itemize}
        \item Reliability: Zuverl\"assige Software welche fehlerfrei betrieben werden kann
        \item Reusability: Code Teile auch f\"ur andere Projekte nutzbar machen
        \item Extendibility: Erweiterbarkeit soll einfach m\"oglich sein
        \item Understandability: Code soll verst\"andlich f\"ur andere sein
        \item Efficiency: Geschwindigkeit
        \item Usability: Software einfach nutzen, auf das Zielpublikum ausgerichtet
        \item Portability: Einfach in eine andere Umgebung z\"ugeln
        \item Functionality: Software soll funktional sein
    \end{itemize}
    \textbf{Definition ISO:} The totality of features and characteristics of a product or service that bear on its ability stated or implied needs
    \\
    \textbf{Definition IEEE:} The degree to which a system, component, or process meets specified requirements.

    \subsection{Ziele}
    Die Software muss den Anforderungen des Kunden entsprechen. \textbf{"Good enough Software" not excellent software!}

    \subsection{Extreme Programming}
    \begin{enumerate}
        \item Der Kunde/Auftraggeber ist immer verf\"ugbar
        \item Code wird gem\"ass vereinbarten Standards programmiert
        \item Zuerst die Tests programmieren, dann den eigentlichen Code
        \item Der produktive Code wird immer zu zweit programmiert
        \item Nur ein Programmierer-Paar darf gleichzeitig Code integrieren
        \item Integriere h\"aufig
        \item Jeder hat auf den gesamten Code Zugriff
        \item Optimiere so sp\"at wie m\"oglich
        \item Keine \"uberstunden
        \item Das Team folgt gemeinsamen Code-Richtlinien, so dass es aussieht, als wenn der Code von einer einzigen Person geschrieben worden w\"are
        \item XP Projekte werden in sehr kurzen Abst\"anden released (von t\"aglich bis zu maximal alle 3-4 Wochen)
    \end{enumerate}
	%Neues Kapitel, neue Seite
	\newpage

    \section{Version Control System}
    Es geht grunds\"atzlich um sich st\"andig \"andernde Artefakte welche verwaltet werden m\"ussen. Jede \"anderung soll eindeutig nachvollziehbar sein.

    \subsection{Motivation f\"ur eine VCS}
    Ohne Versionsmanagement sieht der Alltag von Entwicklern so aus:
    \begin{itemize}
        \item Bugs die behoben wurden tauchen pl\"otzlich wieder auf
        \item Dateien gehen verloren
        \item Fr\"uhere Releases der Software k\"onnen nicht mehr erstellt werden
        \item Dateien werden "auf mysteri\"ose Art und Weise" ver\"andert
        \item Gleicher oder \"ahnlicher Code existiert mehrfach in verschiedenen Projekten
        \item Zwei Entwickler \"andern dieselbe Datei gleichzeitig ohne es zu merken
    \end{itemize}

    \subsection{Problem of Filesharing}
    \includegraphics[width=0.9\textwidth]{assets/problem_of_filesharing.png}

    \subsection{Lock-Modify-Unlock Solution}
    \includegraphics[width=0.9\textwidth]{assets/lock_modify_unlock_solution.png}

    \subsection{Copy-Modify-Merge Solution}
    \includegraphics[width=0.9\textwidth]{assets/copy_modify_merge_solution.png}

    \subsection{Grundbegriffe Versions- und Release-Management}
    \subsubsection{Version}
    Ein Zustand eines Konfigurationselementes mit einem klar definierten Funktionsumfang.
    \subsubsection{Release}
    Bezeichnet eine ver\"offentlichte Version eines Konfigurationselementes. Oft wird ein Release auch ausserhalb der Software-Entwicklungsorganisation zusammengestellt.
    \subsubsection{Major}
    Die Idee, das Major-Versionen (mindestens teilweise) inkompatibel sind
    \subsubsection{Minor}
    \"anderungen dieser Nummer sind r\"uckw\"arts kompatibel.
    \subsubsection{Patch}
    Bug-Fixes, \"anderungen sind vorw\"arts- und r\"uckw\"arts kompatibel.
    \subsubsection{Build}
    Diese Nummer gibt eine Neukompilierung von Sourcecode an, z.B. aufgrund von Prozessor-, Plattform- oder Compiler\"anderungen.
    \subsubsection{Revision}
    Kleine \"anderung an einer Version, welche Fehler behebt, jedoch keine Einfluss auf den Funktionsumfang haben.
    \subsubsection{Variante}
    Eine Variation einer Version welche entwickelt wurde um z.B. auf einer anderen Hardware oder unter einem anderen Betriebssystem zu laufen. Oder auch um f\"ur verschiedene Benutzergruppen feine Anpassungen vorzunehmen. Beispiele: Anpassungen f\"ur Tablets, Sehbehinderte, Touchscreens.
    \subsection{Grundbegriffe VCS}
    \subsubsection{Repository}
    Eine Datenbank in welcher Projektdateien gespeichert werden. Ein Repository vergisst nichts, d.h. es ist nicht m\"oglich eine Datei zu \"uberschreiben. Vielmehr wir einfach eine neue Version der Datei gespeichert, die alte bleibt weiterhin im Repository und es kann auch weiterhin zugegriffen werden.
    \subsubsection{Working Copy}
    Eine \textit{lokale Kopie} aller relevanten Projektdateien. Der Entwickler arbeitet immer auf dieser lokalen Kopie. Es wird also \textit{nie} direkt auf den Dateien im Repository gearbeitet.
    \subsubsection{Checkout / Clone}
    Ist die Bezeichnung f\"ur einen Vorgang wenn eine Working Copy vom Repository bezogen wird. Dies ist eine reine Leseoperation auf dem Repository. Dabei wird auf der Entwicklermaschine eine neue Working Copy angelegt.
    \subsubsection{Commit / Push}
    Bezeichnet den Vorgang wenn eine Datei oder ein ganzes Set an Dateien (neu oder ge\"andert) \textit{mit einer Beschreibung} ins Repository gespeichert wird. Man spricht auch davon diese unter Versionskontrolle zu stellen. Dies ist eine Schreiboperation auf dem Repository die \textit{atomar} erfolgt, d.h. pro Commit werden entweder alle oder gar keine Dateien ins Repository gespeichert. Damit ist sichergestellt, das das Set an Dateien konsistent ins Repository gespeichert wird. Es ist nicht m\"oglich, dass durch zwei gleichzeitige Commits die Dateien durcheinandergebracht werden.
    \subsubsection{Update / Fetch / Pull}
    Bezeichnet den Vorgang wenn Dateien aus dem Repository mit der eigenen Working Copy abgeglichen werden. Indem andere Entwickler ihre Arbeit committen erh\"alt das Repository neue Versionen welche auf den Working Copies der anderen Entwickler noch nicht vorhanden sind. Der Abgleich findet auf der Working Copy statt, f\"ur das Repository ist ein Updatevorgang somit eine reine Leseoperation.
    \subsubsection{Revision, Version}
    Jeder Commit ver\"andert den Inhalt des Repositories und erzeugt somit eine neue Version oder Revision des Repositories die eindeutig identifizierbar sein muss. Dies ist notwendig um sp\"ater wieder auf einen bestimmten Stand der Arbeit zur\"uckzukehren zu k\"onnen. Manche Repositories verwenden mehrstellige Versionsnummern (z.B. CVS), andere nummerieren die Commits einfach durch (z.B. Subversion) oder vergeben einen Hash (z.B. Git) als Identifikation.
    \subsubsection{Entwicklungsverlauf (Baseline, Codeline, Line of Development}
    Dies sind Bezeichnungen f\"ur eine Menge von relevanten Projektdateien die zusammen geh\"oren und die miteinander weiterentwickelt werden. Eine Working Copy enth\"alt all diese Dateien einmal. Ein Entwicklungsverlauf bezeichnet aber die gesamte Historie dieser Dateien w\"ahrend des Entwicklungsverlaufes. D.h. er enth\"alt alle relevanten Projektdateien in allen Versionen f\"ur einen bestimmten Entwicklungsverlauf. Ein Entwicklungsverlauf ist eindeutig \"uber seinen Revisionsverlauf gekennzeichnet. Der Hauptentwicklungsverlauf wird in Subversion oder CVS auch einfach \textit{trunk} genannt und in Git heisst er \"ublicherweise \textit{master}.

    \subsubsection{Branch}
    So wird eine Verzweigung von Entwicklungsverl\"aufen genannt. Branches sind selber auch wieder Entwicklungsverl\"aufe. Sie enthalten selber eine eigene, von anderen Entwicklungsverl\"aufen unabh\"angigen Historie. Je nach Versionsverwaltungssystem werden Branches unterschiedlich eingesetzt. Ein m\"ogliches Szenario ist z.B. wenn die Entwicklung an einer Version 2 weiterl\"auft (Hauptentwicklungsverlauf) und gleichzeitig die alte Version 1.x noch weiter gewartet werde soll (Branch).

    \subsubsection{Merging}
    Bezeichnet den Vorgang zwei Entwicklungsverl\"aufe zu vereinen. Dazu m\"ussen Dateien in unterschiedlichen Versionen zusammengef\"uhrt werden. Dies ist in der Regel ein manueller Vorgang der nur bedingt automatisiert werden kann. Wie beim Branching wird auch das Merging unterschiedlich unterst\"utzt von den verschiedenen Versionskontrollsystemen.

    \subsubsection{Tag, Label}
    Identifiziert bzw. markiert eine bestimmte Revision eines Entwicklungsverlaufes oder Configuration Items und f\"ugt ihm noch zus\"atzliche Informationen hinzu (z.B. gibt ihm einen bestimmten Namen oder Bemerkung wie beispielsweise: \glqq Release f\"ur Demo anl\"asslich Veranstaltung xxx\grqq). Tags sind konzeptionell keine Entwicklungsverl\"aufe sondern nur eine Momentaufnahme (Snapshot) eines solchen.

    \subsection{Configuration Items}
    \begin{center}
        \begin{tabular}{|lll|c}
            \hline
            Unter VCS & Nicht im VCS & Grenzfall \\
            \hline
            Sourcen & Testprotokolle (generiert) & DB \\
            Dokumentation & Testreports (generiert) & Video \\
            Kommunikation & Pers\"onliche Konfig (IDE) & Audio \\
            Tests & Javadoc $\rightarrow$ html &  \\
            Geteilte Config & DIE & \\
            Video / Audiofiles (kleine) & Compilate &\\
            & (.exe, .class, .jar & \\
            & Files aus anderen Projekten & \\
            & (Libraries, Vorlagen) & \\

            \hline
        \end{tabular}
    \end{center}
	%Neues Kapitel, neue Seite
	\newpage

    \section{Build - Automation}
    Die Komponenten einer Software werden per Knopfdruck erstellt. Macht meist mehrer Dinge auf einmal (Code compilieren, Tests durchlaufen, Checkout, Kopie auf Server, E-Mail). Der Buildvorgang kann auch automatisch gestartet werden.
    \subsection{Wieso wird dies ben\"otigt, Probleme}
    \begin{itemize}
        \item Die Entwickler k\"onnen die Applikation nicht zuverl\"assig lokal erstellen
        \item Fehlen einer konsistenten Versionierung
        \item Unit Testing ist nicht konsistent
        \item Status des Build ist nicht bekannt
        \item Abh\"angigkeiten von Komponenten ist nicht bekannt
        \item Entwicklung ist nicht transparent
        \item Handarbeit ist fehleranf\"allig
        \item Wiederholende Arbeit ist langweilig
        \item Automation ist auch Dokumentation
    \end{itemize}

    \subsection{Build Prozess}
    \begin{center}
    	\includegraphics[scale=0.6]{assets/buildprozess.png}
    \end{center}
    
    \subsection{Ben\"otigte Komponenten}
    \begin{itemize}
        \item Build Server
        \item Source Code Control Server
        \item Prozesse
        \item Tools
        \item Entwickler Verantwortung (Code checked before end of day, buildable, passed unit test)
    \end{itemize}

    \subsection{CRISP}
    \begin{itemize}
        \item Complete (Tests erfolgreich, alle Komponenten enthalten)
        \item Repeatable (Wiederherstellung von alten Builds, keine Binary committen, bugfixing)
        \item Informative (Code Dokumentation, Infos f\"ur Merging)
        \item Schedulable (planbar, f\"ur Akronym)
        \item Portable (definierte Portabilit\"at, auch auf anderen System funktional)
    \end{itemize}

    \subsection{Maven}
    Maven ist ein Build Automation Tool und der de-facto Standard in Java Projekten. Maven setzt auf deklarative Konfiguration und folgten dem Ansatz Konvention vor Konfiguration. \textbf{Put the source in the correct directory and Maven will take care of the rest}.

    \subsubsection{Project Model (POM)}
    Enth\"alt die Informationen f\"ur den Output.
    
    \begin{multicols}{2}
    	\lstinputlisting[language=XML]{assets/minimal_pom.xml} 
    	\includegraphics[scale=0.5]{assets/pom.png} \\
    \end{multicols}
    \begin{center}
    	   		\textbf{Pflichtfelder: groupeId, artifactId, version und packaging}
    \end{center}

    \subsubsection{Standard Build Prozess}
    \begin{center}
    	
    \begin{tabular}{|ll|c}
        \hline
        Begriff & Beschreibung  \\
        \hline
        \textbf{validate} & check if project is valid and all necessary information is available \\
        \textbf{process-resources} & convert and filter resource files \\
        \textbf{compile} & compile source code \\
        \textbf{test-compile} & compile test code \\
        \textbf{test} & Execute tests \\
        \textbf{package} & package the artifact \\
        \textbf{integration-test} & execute integration tests \\
        \textbf{install} & copy artifact into the local repository \\
        \textbf{deploy} & publish artifact in the remote repository \\
        \hline
    \end{tabular}
     \end{center}
	
	\newpage

    \subsubsection{Directory Structure}
    \begin{multicols}{2}
    	\includegraphics[scale=0.5]{assets/mvn_directory_structure.png}
    	\begin{itemize}
			\item Java-Source (to be delivered)
			\item Non-Source Files (properties, icons …)
			\item Test Classes
			\item Resources for testing only
			\item generated files
		\end{itemize}
    \end{multicols}
				
	\newpage
    \subsubsection{Fallbeispiel POM}
    \lstinputlisting[language=XML]{assets/pom.xml}
	%Neues Kapitel, neue Seite
	\newpage
	

    \section{Clean Code}
    Clean code is \textbf{simple} and direct. Clean code reads like well-written prose. Clean code never obscures the designer\textquoteright s intent but rather is full of \textbf{crisp} abstractions and \textbf{straightforward} lines of control.

    \subsection{Grunds\"atze}
    \begin{itemize}
        \item Name der Variabel, Methode oder Klasse sollte den Zweck beinhalten.
        \item Variabeln sollten m\"oglichst nahe zum Aufrufpunkt deklariert werden
        \item Callers (Aufrufen) sollten oberhalb der Callees (Aufgerufene) deklaiert sein
        \item Lines short (80 Characters)
        \item Define Tabs vs. Spaces and Line Wrapping/Breaking Rules
        \item Use the Code Convention of the Programming Language
        \item Checkstyle integrieren
        \item Class Documentation (performance, memory consumption, persistence)
        \item Interface Doc (Explain what is done)
        \item Method Doc (precondition, postcondition, invariant) => bei Kommentaren Subjekt auslassen
        \item Use Javadoc
        \item Funktionen sollten nur eine Sache Machen
        \item Negative Konditionen sollten verhindert warden
    \end{itemize}

    \subsection{Wieso CleanCode}
    \begin{itemize}
        \item 80\% of the lifetime cost of a piece of software goes to maintenance.
        \item Code is written once, but read all other times
        \item Hardly any software is maintained for its whole life by the original author.
        \item Clean code improves the readability of the software, allowing engineers to understand new code more quickly and thoroughly.
    \end{itemize}

    \subsection{Konzepte}
    \subsubsection{Vertical Openness}
    Uses more vertical space (new line, brackets, etc) this improves readability, quick to see which code parts are not together.

    \subsubsection{Vertical density}
    Opennness separates concepts. Density implies association. Results in Compact Code.

    \subsubsection{Vertical Distance and Ordering}
    Concepts that are closely related should be vertically close to each other.
    \begin{itemize}
        \item Variables should be declared as close to their usage as possible.
        \item Instance variables should be declared at the top of the class.
        \item Dependent functions: callers should be above callees.
    \end{itemize}


    \subsubsection{Horizontal Openness and Density}
    \begin{itemize}
        \item Keep lines short.
        \subitem complete line should be displayable without scrolling (eg <120 characters per line)
        \item Don\textquoteright t try to horizontally align lists of assignments
        \subitem It draws attention to the wrong thing and can be misleading, e.g., encouraging the reader to read down a column.
        \item Always indent scopes (classes, methods, blocks).
        \item Avoid using tabs, replace them with spaces
        \item Define line wrapping, line breaking rules, e.g.:
        \subitem After comma
        \subitem Before operator, i.e. operators come first on new line
        \item Define clear spacing rules, e.g.
        \subitem Put spaces around = to accentuate the distinction between the LHS and RHS.
        \subitem Don\textquoteright t put spaces between method names and parenthesis, or parenthesis and parameter lists - they\textquoteright re closely related, so should be close.
        \subitem Use spaces to accentuate operator precedence, e.g., no space between unary operators and their operands, space between binary operators and their operands.
    \end{itemize}

    \subsubsection{Team Rules}
    \begin{itemize}
        \item Every team should agree on a coding standard
        \item Beware of code formatting standards getting religious.
        \item If the language you\textquoteright re using has a code convention (like Java\textquoteright s), use it!
    \end{itemize}
    %Neues Kapitel, neue Seite
	\newpage
	

    \section{Continous Integration}
    Integration ist verschiedene Module zusammen zum Laufen zu kriegen. Die Module m\"ussen zusammen kompiliert, gestartet, getestet und deployed werden k\"onnen. \textbf{CI reduziert Risiken und deckt Fehler fr\"uh auf.}

    \subsubsection{Fehlerhafte Integration}
    \begin{itemize}
        \item Integration Server kann den Build nicht durchf\"uhren
        \item Geteilte Inhalte funktionieren nicht in allen System
        \item Fehler bei Unit Tests
        \item Code Qualit\"at failed
        \item Deployment failed
    \end{itemize}

    \subsubsection{Arbeiten mit Continous Integration}
    \begin{itemize}
        \item Nur ein Source Repository
        \item Automatisierter Build
        \item Build testet sich selbst
        \item Jeder commited jeden Tag
        \item Der Build sollte schnell gehalten werden
        \item Testen auf einem Klone der Produktion
        \item Einfach das letzte executable zu erhalten
        \item Jeder sieht was sich \"andert
        \item Automatisiertes Deployment
    \end{itemize}
    \begin{center}
    	\includegraphics[scale=0.6]{assets/arbeit_ci.png}
	\end{center}


    \subsection{Prerequisites of Continuous Integration} 
    \begin{multicols}{2}
    	    \begin{itemize}
        \item VCS Server
        \item Build Server
        \item Deployment Server
        \item Automation tools
        \item CI tools
    \end{itemize}
    \includegraphics[scale=0.5]{assets/vorbedingung_ci.png}
    \end{multicols}   
	
	
    \subsection{Jenkins}
    Jenkins ist ein CI Server welcher building, unit tests, code coverage und weitere Punkte zur Verf\"ugung stellt.
    Gibt sofort einen Status \"uber den Build zur\"uck und hat ein Dashboard f\"ur die Integration von verschiedenen Projekten.

    \subsection{Jenkins Componenten und Add Ons}
    \begin{center}
        \begin{tabular}{|ll|}
            \hline
            Components & Add Ons \\
            \hline
            CI Server (Monitors the VCS and Execute Build Script) & Unit Testing \\
            Management Console & Test Code Coverage \\
            Dashboard & Analysis \\
            Email Notification & Ant \\
            & Google Calender, and, and, and \\
            \hline
        \end{tabular}
    \end{center}
	%Neues Kapitel, neue Seite
	\newpage
	
	

    \section{Unit Testing}
    Testing von Softare ist extrem wichtig. Zum einen k\"onnen Fehler aufgedeckt und korrigiert werden. Somit k\"onnen Kosten eingespart werden. Falls es um Spezialsoftware geht k\"onnen sogar Menschenleben oder Umweltkatastrophen entstehen bzw. verhindert werden.
    \begin{itemize}
        \item Validation: Did you build the right thing?
        \item Verification: Did you build it right?
    \end{itemize}

    \subsection{Fault, Error and Failure}
    \subsubsection{Fault}
    A static defect in the software = the actual mistake or bug in the code.
    \subsubsection{Software Error}
    An incorrect internal state that is the manifestation of some fault.
    \subsubsection{Software Failure}
    External incorrect behavior with respect to the requirements or other description of the expected behavior.
    \subsection{Ablauf}
    \begin{itemize}
        \item Wird auf jede unit (Klasse, manchmal Methoden) durchgef\"uhrt
        \item In isolation
        \item Unit Test baut eine eigene Testumgebung auf
        \item Checkt das Resultat mit den erwarten Werten
        \item Test Spezifizierung
        \item Test Implementierung
        \item Setup und Cleanup definieren
    \end{itemize}


    \subsection{Schlechte Ausreden gegen Unit Testing}
    \begin{itemize}
        \item It takes too much time to write the tests
        \item It takes too long to run the tests
        \item It's not my job to test my codeI
        \item don't really know how the code is supposed to behave so I can't test it
        \item But it compiles
        \item I'm being paid to write code, not to write tests
        \item I feel guilty about putting testers and QA staff out of work
        \item My company won't let me run unit tests on the live system
    \end{itemize}

    \includegraphics{assets/ablauf_unittesting.png}

    \subsection{JUnit}
    Standard in Java
    \subsubsection{Gute JUnit Tests}
    \begin{itemize}
        \item Automatic (Invoking the tests and checking the results)
        \item Thorough (test everything that is likely to break)
        \item Repeatable (ablte to run over and over again)
        \item Independant (no test relies on another test)
        \item Professional (use same standard as for production code)
        \item Do not test compiler, setters/getters
    \end{itemize}

    \subsubsection{Equivalent Klassen}
    Die Eingabewerte von Tests m\"ussen in verschiedene Equivalent Klassen eingegrenzt werden. In diesen Klassen soll der Grenzwert erkannt werden und zudem auch um die Grenzwerte getestet werden (off-by-one-errors)
    \subsubsection{Right BICEP}
    \begin{itemize}
        \item Right \textendash Sind die Resultate korrekt
        \item B \textendash Sind alle boundary (Grenzwerte) korrekt
        \item I \textendash K\"onnen auch Inverse Beziehungen getestet werden
        \item C \textendash Cross check
        \item E \textendash K\"onnen Errors erzwungen werden
        \item P \textendash Performance sind wie erwartet (was passiert wenn Input verdoppelt, verdreifacht wird)
    \end{itemize}

    \subsubsection{Grundbegriffe}
    \begin{itemize}
        \item Class under Test (CUT)
        \item Method under Test (MUT)
        \item Test Case (Spezifische daten welche f\"ur Test ausgew\"ahlt wurden @Before, @After,@Test)
        \item Test Suite (ein Set von verschiedenen Test Cases)
        \item Test Fixture (Die ganze Test Klasse)
    \end{itemize}

    \subsection{Testing in Isolation}
    \includegraphics{assets/isolation_testing.png}
   
	Some things are difficult to test in isolation 
	\begin{itemize}
		\item Configuration
		\item Database Access
		\item Network Access
	\end{itemize}
	In general: How to test a class that depends on other components?
	
	\subsubsection{Test Doubles}
	A \textit{Test Double} is any object or component that is installed in place of the real component for the express purpose of running a test.
	
	\subsubsection{Test Doubles in Unit Testing}
	\begin{itemize}
		\item \textbf{Dummy objects} are passed around but never actually used. Usually they are just used to fill parameter lists.
		\item \textbf{Stubs} are minimal implementations of interfaces or base classes. Methods returning void will typically contain no implementation at all, while methods returning values will typically return hard-coded values.
		\item \textbf{Spies} similar to a stub, but a spy will also record which members were invoked so that unit tests can verify that members were invoked as expected.
		\item \textbf{Fakes} contain more complex implementations, typically handling interactions between different members of the type it\textquoteright s inheriting.
		\item \textbf{Mocks objects} pre-programmed with expectations about the methods that will be invoked. The expected arguments for a call and the resulting return values or exceptions
	\end{itemize}
    
    \subsubsection{Test Doubles - Stubs}
    \begin{itemize}
    	\item Stub is a dumb object!
		\item A Stub is just an object that returns the same value over and over again.
		\item Allows implementation of tests without production code.
    \end{itemize}
    \newpage
    For example: \begin{verbatim}
			class EmailStub implements EmailService{
  				void sendMail(String adr; String Text) {;}
			}
		\end{verbatim}
    
    \subsubsection{Stubs - Sample Application}
    \begin{center}
    	\includegraphics[scale=0.3]{assets/stubs.png}
    \end{center}
       
    \subsection{Mock Testing}
    \begin{itemize}
    	\item Mock objects simulate parts of the behaviour of domain objects.
    	\item Classes can be tested in isolation by simulating their collaborators with mock objects.
    	\item Takes classes out of a production environment and puts them in a well defined lab environment.
    \end{itemize}
    
    \subsubsection{When to use Mock Objects}
    \begin{itemize}
    	\item The real object has non-deterministic behaviour.
    	\item The real object is difficult to set up.
    	\item The real object is slow.
    	\item The real object has a user interface.
    	\item The test needs to ask the real object about how it was used (-> if callback function was called)
    	\item The real object does not yet exist.
    \end{itemize}
    
    \subsubsection{Pros and Cons of Mock Objects}
    \begin{itemize}
    	\item Pros
			\subitem Emphasize that testing is about isolation
			\subitem Simplifies handling of interfaces with many methods
			\subitem Can enable near-instant testing even of code that uses resource-bound APIs such as JDBC
		\item Cons
			\subitem Can mirror the implementation too closely, making atest suite fragile
			\subitem Mocking can become complex with APIs like JDBC
    \end{itemize}
    
    \subsection{Mockito}
    \begin{center}
    	\includegraphics[scale=0.4]{assets/mockito.png}
    \end{center}
    \subsubsection{Mocking Usage Pattern}
    \begin{enumerate}
    	\item Create a mock object for the interface or class we would like to simulate
    	\item Specify the expected behavior of the mock
    	\item Use the mock in standard unit testing, as if it was a normal object
    	\item Verify behavior
    \end{enumerate}
    
    \subsubsection{Mockito Benefits}
    \begin{itemize}
    	\item No hand-writing of classes for mock objects needed.
    	\item Supports refactoring-safe mock objects: test code will not break at runtime when renaming methods or reordering method parameters
    	\item Supports return values and exceptions.
    	\item Supports order-checking of method calls, for one or more mock objects.
    	\item Supports checking of the number of actual calls of the mock objects
    \end{itemize}
    
	%Neues Kapitel, neue Seite
	\newpage
		
	
    \section{Javadoc}
    \begin{itemize}
        \item Is a separate program that comes with the JDK
        \item Reads your program, makes lists of all the classes, interfaces, methods, and variables, and creates HTML pages displaying its results
        \item Its output is very professional looking
    \end{itemize}

    This makes \texttt{you} look good ... and it also helps keep your manager from imposing bizarre documentation standards
    \begin{itemize}
        \item Write comments for the programmer who uses your classes
    \end{itemize}
    Anything you want to make available outside the class should be documented. It is a good idea to describe, for your own use, private elements as wel. \texttt{javadoc} can be set to generate documentation for: only public elements
    \begin{itemize}
        \item public and protected elements
        \item public, protected, and package elements
        \item everything--that is, public, protected, package, and
        \item private elements
    \end{itemize}

    \subsection{Tags In javadoc Comments}
    Use the standard ordering for javadoc tags
    In method descriptions, use:
    \begin{verbatim}
        @param p A description of parameter p.
        @return A description of the value returned (unless the method returns void).
        @exception e Describe any thrown exception.
        @see Adds a "See Also" heading with a link or text entry that points to reference
    \end{verbatim}
    Don\textquoteright t use tags unless you maintain them!

    \subsection{Know Where To Put Comments!}
    javadoc comments must be immediately before: a package (only in package-info.java)
    \begin{itemize}
        \item a class
        \item an interface
        \item a constructor a method
        \item a field
    \end{itemize}
    Anywhere else, javadoc comments will be \textit{ignored}!

    \subsection{Hints}
    \begin{itemize}
        \item Keep comments up to date
        \item Use the word \grqq this \grqq rather than \grqq the \grqq when referring to instances of the current class.
        \item Hence, \texttt{this object} has an especially clear meaning in comments Example: \texttt{Decides which direction this frog should move.}(As a comment in the \texttt{Frog} class)
        \item Summarize the essence of your method, field or package comment in the first sentence.
        \item Javadoc copies the first sentence into a summary paragraph.
        \item Include examples if they are helpful.
    \end{itemize}
	%Neues Kapitel, neue Seite
	\newpage
	
	
	\section{Software Smells \& Refactoring }
	Is the process of changing a software system in such a way that
	it does not alter the external behavior of the code, yet improves
	its internal structure. \textit{Martin Fowler, 1999}
	
	\subsection{Code Smell}
	A \textcolor{red}{\textit{Code Smell}} is a hint that something \textcolor{red}{\textit{might}} be wrong with the code.
	\subsection{How do i find Code Smells?}
	\begin{itemize}
		\item Sniff out the “bad smells in code”! (Check out Martin Fowler, Cap 3)
		\item 	Analyze your code
			\subitem Manually, by looking at the code
			\subitem Automated, using software analysis tools
				\subsubitem Checkstyle for java 
				\subsubitem Spotbugs for Java
				\subsubitem PMD for Java
	\end{itemize}
	
	\subsection{Some Typical Code Smells}
	\begin{multicols}{2}
	\begin{itemize}
		\item “Too Much” Code Smells Duplicated Code
			\subitem Long Method
			\subitem Large Class
			\subitem Long Parameter List
			\subitem Feature Envy
			\subitem Switch Statements
			\subitem Parallel Inheritance Hierarchies \\
		\item Code Change Smells
			\subitem Divergent Change
			\subitem Shotgun Surgery
			\item “Not enough” Code Smells
			\subitem Empty Catch Clause 
		\item Comment Smells
			\subitem Need To Comment 
			\subitem Too much Comments
	\end{itemize}	
	\end{multicols}
	\subsection{Why Refactoring}
	\begin{itemize}
		\item Context: You need to modify existing code 
			\subitem extend/adapt/correct/...
		\item (Bad) Solution:
			\subitem Just add new features
		\item Consequence: 
			\subitem Design decays
			\subitem Duplicated code
			\subitem Long methods / classes , ...
		\item (Good) Solution:
			\subitem first make code simpler, prepare for more complexity resp. $\rightarrow$ Refactor
			\subitem Add new features
		\item Consequence:
			\subitem Code stays simple
	\end{itemize}
	\subsection{Benefits of Refactoring}
	\begin{itemize}
		\item Refactoring improves the design of your system 
			\subitem Fight code rot!
		\item  Refactoring makes your software easier to understand 
			\subitem because structure is improved
			\subitem duplicated code is removed
			\subitem etc.
		\item Refactoring helps you to find bugs
			\subitem because it promotes a deep understanding of the code
		\item Refactoring saves development time 
			\subitem because good code is easier to evolve 
			\subitem because your code/design is more robust
	\end{itemize}

	\subsection{Prerequisites for Refactoring}
	\subsubsection{Automated measures}
	\begin{itemize}
		\item Version Control System 
		\item Continuous integration 
		\item Tests
		\item Coding standards
	\end{itemize}
	
	\subsubsection{Social measures}
	These are in descent order of importance
	\begin{itemize}
		\item Collective ownership 
		\item Rules of Simplicity
		\item Sustainable Pace
		\item Pair programming
	\end{itemize}
	\subsubsection{The two Hats of Refactoring}
	\begin{itemize}
		\item \textcolor{red}{Don't try to clean the code when wearing the function hat.}
		\item \textcolor{darkgreen}{Don't try to add features when wearing the refactoring hat.}
	\end{itemize}
	\subsection{Refactoring Workflow}
	\begin{center}
		\includegraphics[scale=0.4]{assets/refactoring_workflow.png}
	\end{center}
	
	\subsection{When?}
	\begin{itemize}
		\item Do refactor
			\subitem Before or after you add functionality
			\subitem When you learn something about the code 
			\subitem As a consequence of a bug fix
			\subitem As a consequence of code review
		\item Do not refactor
			\subitem When the tests are not passing
			\subitem When you should re-implement the code 
	\end{itemize}

	\subsection{Problems with Refactoring}
	\begin{itemize}
		\item Taken too far, refactoring can lead to incessant tinkering with the code, trying to make it perfect
		\item Databases can be difficult to refactor code is easy to change; databases are not
		\item Refactoring published interfaces can cause problems for the code that uses those interfaces
	\end{itemize}

	
	%Neues Kapitel, neue Seite
	\newpage
	
	\section{Metrics}
	Top 5 reasons why IT projects fail:
	\begin{enumerate}
		\item Communication problems
		\item Bad planning / lack of planning
		\item Lack of ressources
		\item Requirements and goals are not clear
		\item Politics
	\end{enumerate}
	So code quality isn’t an issue here?
	\subsection{Software Quality}
	\includegraphics[scale=0.4]{assets/software_quality}
	
	\subsection{Characteristics of useful Metrics}
	A useful metric has four characteristics
	\begin{itemize}
		\item \textbf{Measurable:} If you can’t measure it, you can’t use it!
		\item \textbf{Independent:} A metric must be independent of any influence of the project members! If they can manipulate the metric, it gets useless!
		\item \textbf{Reliable:} Conclusions drawn from metrics must be plausible. Therefore the raw data must be reliable.
		\item \textbf{Accurate:} Metrics must be accurate, to be useful. Even if the precision varies!
	\end{itemize}
	\subsection{Static Software Metrics}
	\begin{itemize}
		\item  Size Metrics
			\subitem Lines of Code; Number of Statements, Fields, Methods, Packages
		\item Dataflow Metrics
			\subitem Cyclomatic Complexity (McCabe Complexity)
    		\subitem Dead Code detection Initialization before use
			\subitem In Java: done by the compiler!
  		\item Style Metrics
			\subitem Number of Levels (nesting depth)
			\subitem Naming conventions, formatting conventions
		\item OO Metrics
			\subitem No. of classes, packages, methods Inheritance depth / width
		\item Coupling Metrics
			\subitem LCOM: lack of cohesion metrics
			\subitem No. of calling classes / no. of called classes Efferent / Afferent couplings
		\item Statistic Metrics 
			\subitem Instability
			\subitem Abstractness
	\end{itemize}
	
	\subsection{Dynamic Software Metrics}
	\begin{itemize}
		\item Performance Metrics Time spent
			\subitem Memory consumption (also memory leaks) 
			\subitem Network traffic
			\subitem Bandwidth needed
			\subitem No. of clicks to perform a task
		\item Other Dynamic Metrics
			\subitem No. of tests executed, No. of failed tests 
			\subitem Code coverage
	\end{itemize}
	
	\subsection{What else can be measured}
	\begin{itemize}
		\item During the software project
			\subitem Project costs vs. estimated project costs
			\subitem Costs per functionality
			\subitem Delivered functionality vs planned functionality
			\subitem Costs of separate activities (meeting-time vs. development time)
		\item During development
			\subitem Person months/years spent on development 
			\subitem Change requests implemented
			\subitem Impact of change requests per Module 
			\subitem Found bugs per Code volume
			\subitem Bugs per Module
			\subitem Time to solve bugs / cost to solve bugs
		\item \textbf{It is important to set the metrics in context!}
	\end{itemize}
	
	\subsection{Cyclomatic Complexity (McCabe)}
	\begin{itemize}
		\item Cyclomatic Complexity is the number of possible execution paths through the code.
		\item For a single method the Cyclomatic number N is defined as follows:
			\subitem \texttt{N = b + 1 whereas b is the number of binary decision points (if, while, for, case) 
			\\
			\textcolor{orange}{\textbf{N < 10 => code well readable}}}
								
		\item Criticism: switch-statements are well readable but boost the cyclomatic number
	\end{itemize}
	\begin{center}
		\includegraphics[scale=0.5]{assets/caclomatic_complexity.png} \\
		\textbf{Ablauf zu zyklischen Komplexität}
	\end{center}
	
	
	\subsubsection{Decision Points}
	Typische Entscheidungspunkte sind:
	\begin{multicols}{2}
	\begin{itemize}
		\item if
		\item for
		\item while
		\item case
	\end{itemize}
	\end{multicols}
	Wird oft falsch gemacht:
	\begin{itemize}
		\item switch-Statement selbst ist kein Entscheidungspunkt, wohl aber jedes einzelne case- Statement. Denn erst bei den case-Statements steht die Bedingung, welche entscheidet, ob der nachfolgende Block ausgef\"uhrt wird.
		\item Else und default sind keine Entscheidungspunkte, die Entscheidung wird im if, bzw in allen anderen case-Statements getroffen. Else und default sind dann nur noch die \"ubrigbleibende Alternative.
		\item break: springt zwar auch im Kontrollfluss \"uber folgende Statements hinweg, ist aber kein Entscheidungspunkt, da der Sprung unbedingt ist.
	\end{itemize}
	
	\subsection{Cohesion and Coupling Metrics}
	\includegraphics[scale=0.5]{assets/cohesion_coupling.png}
	\begin{itemize}
		\item Cohesion
			\subitem Measure how closely related the methods of a class are.
		\item Coupling / Dependency
			\subitem Measure the degree to which each class relies on other classes
		\item Low coupling usually correlates with high cohesion (which is optimal)
		\item Metrics: LCOM (Lack of Cohesion in Method) several LCOM metrics!
	\end{itemize}
	
	\subsection{LCOM -  Lack of cohesion in methods}
	Zur Messung von Softwareprodukten werden sogenannte Software-Metriken verwendet, die unterschiedliche Eigenschaften von Softwareprodukten und -prozessen quantifizieren. Eine objektorientierte Metrik berücksichtigt bei der Messung von Software die Zusammenfassung von Datenstrukturen und der darauf anwendbaren Methoden zu einem Objekt, dessen Beziehungen zu anderen Objekten sowie die generellen Strukturmerkmale objektorientierter Programmierung.
	Die Metrik nach Lack of Cohesion in Methods (LCOM) ist ein Maß für die Kohäsion - d.h. den Zusammenhalt - von Methoden in der betrachteten Klasse. Weitere objektorientierte Software-Metriken sind Weighted Methods for Class (WMC), Response for a Class (RFC), Coupling Between Objects (CBO), Depth of Inheritance Tree (DIT) und Number of Children (NOC).

	LCOM-Definition: LCOM ist gleich der Paare von Methoden ohne gm. Instv. Abzüglich der Paare von Methoden mit gm. Instv. gm. Instv. ist die gemeinsame Instanzvariable.

	Wichtig bei dieser Methode ist es, darauf zu achten, dass jeweils Paare von Methoden betrachtet werden. Da ein negativer Wert von LCOM unsinnig ist, wird LCOM=0 gesetzt, wenn die Subtraktion einen negativen Wert ergibt.
		\begin{center}
			\includegraphics{assets/lcom_ex}
		\end{center}
	
	Gemäß anliegender Darstellung ist eine Klasse A mit 3 Methoden m1(), m2() und m3() gegeben, die jeweils auf bestimmten Instanzvariablen operieren.

	Beispiel Klasse mit Methoden und Instanz-variablen:
	
	Paare: m1/m3, m1/m2, m2/m3, mit m1/m2 als gemeinsame Instanzvariable c.

	Paare von Methoden ohne gm. Instv. = 1+0+1, Paare von Methoden mit gm. Instv. = 0+1+0

	LCOM(A) = 2-1 = 1.

	Anwendung: Ansatz zur Überprüfung der Kapselung einer Klasse. Dies aus der Überlegung heraus, dass ein hoher Wert von LCOM auf eine schlechte Kapselung hindeutet, da offensichtlich viele Methoden auf disjunkten Attributmengen operieren.
	
	%Neues Kapitel, neue Seite
	\newpage
	
	\section{Logging}
	\subsection{Why logging?}
	\begin{itemize}
		\item Logging is a technique for \textcolor{red}{Monitoring} and \textcolor{red}{Debugging} applications
		\item \textcolor{red}{Debuggers} focus on the \textcolor{red}{state} of a program \textcolor{red}{\textbf{now}}
			\subitem A stack trace can tell you only how the program got here directly 
			\subitem It is not possible to detect what was before this actual call
		\item \textcolor{red}{Logging} provides information about the \textcolor{red}{state} of a program or a data structure \textcolor{red}{\textbf{over time}}
			\subitem Logging can reveal several classes of errors and information that debuggers cannot.
	\end{itemize}
	
	\subsection{Value of Logging}
	\begin{itemize}
		\item Logging is invaluable in any system that needs to know how 
			\subitem an application is used
			\subitem who is using the application
			\subitem sequences of event
			\subitem how fast the system is 
			\subitem how well a systems scales
		\item Especially for 
			\subitem real-time systems
			\subitem event-based application 
			\subitem distributed environment 
			\subitem (concurrent processes)
	\end{itemize}
	
	\subsection{Approaches to logging}
	Do not use \texttt{System.out.println}. Use a Standart Framework such as Log4j2, slf4j, Logback, Standard Java Logging
	\subsubsection{Benefits using Logframeworks}
	\begin{itemize}
		\item Configuration of the logging features is externalized
		\item Log messages can be prioritized
		\item Logging supports different message layouts
		\item Enabling / disabling at runtime
		\item Support different output targets
		\item  Different output levels
		\item supports message caching in order to prevent performance decrease
	\end{itemize}
	
	\subsection{Log4j*}
    Log4j is an Apache Open Source Project. It's actual Release is 2.x and you can find Documentation under http://logging.apache.org/log4j/2.x/. Originally developed by IBM at Zurich Research Labs. It is the father of many other logging Frameworks like: log4php, log4cxx, log4net, \dots
    
    \subsubsection{Basic Usage}
	\lstinputlisting[language=Java]{assets/basic_log4j.java}
	
	\subsection{Concepts}
	\begin{itemize}
		\item \textbf{Priority}: Determines in the code \textcolor{blue}{what} is logged.
		\item \textbf{Level}: Determines in the configuration \textcolor{blue}{wheter} something logged.
		\item \textbf{Layout (Formatter)}: Determines \textcolor{blue}{how} it is logged.
		\item \textbf{Appender}: Determines \textcolor{blue}{where} it is logged.
		\item \textbf{Logger}: Writes a log entry to an \textcolor{blue}{appender} in a given \textcolor{blue}{layout} it the appropriate \textcolor{blue}{level} is met by the \textcolor{blue}{priority} of the log-instruction.
	\end{itemize}
	\begin{center}
		\includegraphics[scale=0.5]{assets/logger_flow}
	\end{center}
	
	\subsection{Logging Priorities}
	\subsubsection{Defect logging}
	\begin{itemize}
		\item FATAL: In case of very severe errors from which your application cannot recover.
		\item ERROR: When an error is encountered (but you application can still run).
		\item WARN: Log requests to alert about harmful situations. 
	\end{itemize}
	
	\subsubsection{Informative logging}
	\begin{itemize}
		\item INFO: Logs to inform about progress of the application at a coarse grained level.
		\item DEBUG: Log requests that are relevant to debug the application.
		\item TRACE: Log on an extremely fined grained level to trace control flow.
	\end{itemize}
	
	\subsection{Logging API}	
	\begin{table}[h]
		\begin{tabular}{|l|l|}
			\hline
			\textbf{Level} & \textbf{Command} \\
			\hline
			FATAL 		& fatal(Object message [, Throwable throwable] ); \\
			\hline
			ERROR 		& error(Object message [, Throwable throwable] ); \\
			\hline
		 	WARN 		& warn(Object message [, Throwable throwable] ); \\
		 	\hline
		 	INFO 		& info(Object message [, Throwable throwable] );\\
		 	\hline
			DEBUG 		& debug(Object message [, Throwable throwable] );\\
			\hline
		 	TRACE 		& trace(Object message [, Throwable throwable] );\\
		 	\hline
		 	As wrapper 	& log(Priority level, Object message);\\
						& log(Priority level, Object message,Throwable throwable);\\
			\hline
		\end{tabular}
	\end{table}
	
	\subsection{Logger Names}
	Name a Logger by locality. Instantiating a logger in each class, with the logger name equal to the fully-qualified name of the class. This is a useful and straightforward approach for defining loggers. 
	\\
	\graybox{class Foo \{
			static Logger logger = LogManager.getLogger(Foo.class); ...
			\}
	}
	\subsubsection{Benefits of using Fully Qualified Class Names}
	\begin{itemize}
		\item It is very simple to implement.
		\item It is very simple to explain to new developers.
		\item It automatically mirrors the application's own modular design.
		\item It can be further refined at will.
		\item Printing the logger automatically gives information on the locality of the log statement.
		\item A Logger is an ancestor of another Logger if its name followed by a dot is a prefix of the descendant logger name.
		\item For example, the Logger named "com.foo" is a parent of the Logger named "com.foo.Bar". Similarly, "java" is a parent of "java.util" and an ancestor of "java.util.Vector". This naming scheme should be familiar to most developers.
	\end{itemize}
	\subsection{Loggers, Appenders und Layouts}
	\begin{center}
		\includegraphics[scale=0.4]{assets/loggers_appenders_layouts}
	\end{center}
	Logger sind in Hierarchien definiert. Über Properties kann man das logging zur runtime anpassen. Jedem Logger ist ein Level zugeordnet. Ein Logstatement wird nur ausgegeben, wenn seine Priorität (also Level) und seine Kategorie (logger) zutreffen. \"Uber Appender können mehrere Output angegeben werden. Logger definieren eine Level und einen Appender.\\
	\begin{center}
		\includegraphics[scale=0.4]{assets/logger_example}
	\end{center}
	Wenn kein Logger konfiguriert ist über eine Konfigurationsdatei oder im Sourcecode, wird der Output an den Root Logger gesendet.
	
	\subsection{Level}
	\begin{itemize}
		\item Levels have the same name as priorities
		\item Levels are set in the configuration (log4j2.xml)
		\item Priorities are programmed in the code
		\item Levels determine which log messages will be shown in the log. They act as a filter which allows to pass logs with priorities of the same name and higher to pass to the appenders. All other logs will be ignored.
	\end{itemize}
	\subsection{Appender}
	Ein Appender sendet seine empfangenen Messages an einen definierten Endabnehmer. Dies können sein:
	\begin{itemize}
		\item ConsoleAppender - Write log to System.out or System.err
		\item FileAppender – Write to a log file
		\item SocketAppender – Dump log output to a socket
		\item SyslogAppender – Write to the syslog.
		\item NTEventLogAppender – Write the logs to the NT Event Log system.
		\item RollingFileAppender – backup the log files after they reach a certain size.
		\item SMTPAppender – Send Messages to email
		\item JMSAppender – Send messages using Java Messaging Service
	\end{itemize}
	Es kann auch ein eigener Implementiert werden, je nachdem, was gebraucht wird.
	
	\subsection{Pattern Layout}
	Mit einem Pattern könne die Meldungen formatiert ausgegeben werden. Die Definition eines Appenders ist stark an die printf Funktion aus C angelehnt.
	\begin{center}
		\includegraphics[scale=0.4]{assets/pattern}
	\end{center}
	Dieses Pattern resultiert in der Ausgabe:\\
	\graybox{2000-09-07 14:07:41,508 [main] INFO MyApp - Entering application.}\\
	\graybox{2000-09-07 14:07:41,529 [main] INFO MyApp - Exiting application. }
	
	\subsection{Beispiel log4j.xml}
	\lstinputlisting[language=XML]{assets/log4j.xml}
	
	\subsection{Costs of logging}
	\begin{itemize}
		\item Logging performance is an issue
		\item When logging is turned off entirely or just for a set of priorities, the cost of a log request consists of a method invocation plus an integer comparison.
		\item The typical cost of actually logging is about 100 to 300 microseconds. This is the cost of formatting the log output and sending it to its target destination.
	\end{itemize}
	\newpage
	\subsection{Hidden costs of logging}
	\begin{itemize}
		\item Method invocation involves the "hidden" cost of parameter construction.
		\item To avoid the parameter construction cost use lazy logging with lambdas:
			\subitem \begin{verbatim}
				logger.debug(() -> ("Entry number: " + i + " is " + String.valueOf(entry[i])));
				// or before Java 1.8..
					if (logger.isDebugEnabled()) {
					logger.debug("Entry number: " + i + " is " + String.valueOf(entry[i]));
				} 
			\end{verbatim} 
	\end{itemize}
	
	\subsection{More Log4j2 Fearures}
	\begin{itemize}
		\item Async Loggers - performance similar to logging switched off
		\item Custom log levels
		\item Automatic reload of configuration upon modification
		\item Java 8-style lambda support for lazy logging
		\item Filtering: filtering based on context data, markers, regular expressions, and other components in the Log event.
		\item Plugin Architecture - easy to extend by building custom components
	\end{itemize}
	
	\subsection{Logging Exceptions}
	\begin{itemize}
		\item Don't use e.printStackTrace() use log.error("Exception message", e) instead
		\item Don't log an exception and throw same exception again
		\item Don't discard the stack trace, append it!
			\subitem \} catch(SQLException e)\{
						throw new RuntimeException("DB exception", e);
						\}
	\end{itemize}
	\newpage
	\subsection{log4j2 Patterns Vars}
	\begin{table}[h]
		\begin{tabular}{|p{1.5cm}|p{15cm}|}
		\hline
		Conversion & Character	Effect \\
		\hline
c &	Used to output the category of the logging event. \\ \hline
C &	Used to output the fully qualified class name of the caller issuing the logging request \%C{1} will output "SomeClass". \\ \hline
d &	Used to output the date of the logging event. The date conversion specifier may be followed by a date format specifier enclosed between braces. For example, \%d\{HH:mm:ss,SSS\} \\ \hline
F &	Used to output the file name where the logging request was issued.\\ \hline
l &	Used to output location information of the caller which generated the logging event. \\ \hline
L &	Used to output the line number from where the logging request was issued.\\ \hline
m & Used to output the application supplied message associated with the logging event.\\ \hline
M &	Used to output the method name where the logging request was issued. \\ \hline
n &	Outputs the platform dependent line separator character or characters. \\ \hline
p &	Used to output the priority of the logging event.\\ \hline
r &	Used to output the number of milliseconds elapsed from the construction of the layout until the creation of the logging event.\\ \hline
t &	Used to output the name of the thread that generated the logging event.\\ \hline
x &	Used to output the NDC (nested diagnostic context) associated with the thread that generated the logging event.\\ \hline
X &	Used to output the MDC (mapped diagnostic context) associated with the thread that generated the logging event. \\ \hline
\% & The sequence \%\% outputs a single percent sign.\\
			\hline
		\end{tabular}
	\end{table}

	
	
	%Neues Kapitel, neue Seite
	\newpage
    \section{Codebeispiele} \label{sec:codebeispiele}
    \subsection{RentalTest} \label{subsec:rentaltest}
    \lstinputlisting[language=Java]{assets/RentalTest.java}
    %Neues Codebeispiel, neue Seite
	\newpage
    \subsection{Checkstyle} \label{subsec:heckstyle}
    \lstinputlisting[language=XML]{assets/swc_checkstyle.xml}
    
    % Inhalt Ende
\end{document} 









